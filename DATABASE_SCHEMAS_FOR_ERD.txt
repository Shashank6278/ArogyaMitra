===============================================
AROGYA MITRA - DATABASE SCHEMA FILES
For ER Diagram Generation
===============================================

PROJECT: ArogyaMitra (Healthcare Management System)
DATABASE: MongoDB with Mongoose ODM
TOTAL MODELS: 5

===============================================
1. USER MODEL (userModel.js)
===============================================

import mongoose from "mongoose";

const userSchema = new mongoose.Schema({
    name: { type: String, required: true },
    email: { type: String, required: true, unique: true },
    aadhar: { type: String, required: true }, // 12-digit Aadhar number
    uhid: { type: String, unique: true, sparse: true }, // Unique Health ID (16 digits: Aadhar(12) + RH/UH(2) + Random(2))
    faceData: { type: String, default: '' }, // Base64 encoded face image for rural users
    image: { type: String, default: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA5uSURBVHgB7d0JchvHFcbxN+C+iaQolmzFsaWqHMA5QXID+wZJTmDnBLZu4BvER4hvYJ/AvoHlimPZRUngvoAg4PkwGJOiuGCd6df9/1UhoJZYJIBvXndPL5ndofljd8NW7bP8y79bZk+tmz8ATFdmu3nWfuiYfdNo2383389e3P5Xb9B82X1qs/YfU3AB1Cuzr+3cnt8U5Mb132i+7n5mc/a9EV4gDF37Z15Qv3/9a/fz63/0VgXOw/uFdexLAxCqLze3s+flL/4IcK/yduwrAxC0zoX9e+u9rJfVXoB7fV41m7u2YQBCt2tt+6v6xEUfeM6+ILyAGxv9QWbL+iPOPxoAX2Zts9GZtU8NgDudln3eyNvQnxgAd/Lw/k194I8NgD+ZPc2aO92uAXCpYQDcIsCAYwQYcIwAA44RYMAxAgw4RoABxwgw4BgBBhwjwIBjBBhwjAADjhFgwDECDDhGgAHHCDDgGAEGHCPAgGMEGHCMAAOOEWDAMQIMOEaAAccIMOAYAQYcI8CAYwQYcIwAA44RYMAxAgw4RoABxwgw4BgBBhwjwIBjBBhwjAADjhFgwDECDDhGgAHHCDDgGAEGHCPAgGOzBlfanfzRNrvo5o8Ls46eO8VDut3i966babz7rMfcjFmWP8/rOTM4Q4ADpjCenZu18sCe52FtX9wczkGUAS+fb6IwK9Dzc/kHI/96gU9H8HiLAnOWh/WsZXZ6fnfYpkEXCT30b0sjr8jz+SdkYb4I8wwdruAQ4AAotCdnRbUdtcJOg74XhbkMtCr08iJhDgkBrkmv0uWV9vgsrNDeRd/z3lHxtSrz0kIe6HlDjQhwxVRtD0+Kfq1n+v5b/Z9lKQ/x8gJVuQ5Zc6fr5PrvWyzBvYuCvLZEkKtEBZ6yFIJbOmkVD4JcHQI8JSkF9zqFWANyalYryJgeAjxh6pAc5ME9OrOkaWDu8LQI8+oSg13TQoAnSKPKe8d+RpWroHvZGrlundOsngYCPAGqurtHl/dL8S5VYnUnqMaTRYDHpL6uKkzVs6Y8Kqux5nKrGjP3enwEeAwHp8VAFYaj8QG1VrbWaFKPi5dvBGoyvz4gvONQNX61X4wbYHQEeEj64O3sp3l7aNI02Nc8KkbtMRqa0EPQXODmIf3dSdPtJrVqHiwbhkQFHpDC++aA8E6L+sW7R4YhUYEHcNy6XIWD6dGtJm1aoMEtRqgHQwW+B+Gtllo6GiBkic1gCPAdrq5/RXX0utOcHgwBvkXZ50U9dJ+YEN+PAN9AA1UabWZOc73UJ+YW090I8DXlJA1Gm8OgW0xHp4ZbEOBrdpnXHJz9RNdVD4IAX6G5zawoChMX1psR4L5yBw2ESeFlUOtdBNgul7khbGpG0x9+GwG2YqST5pkP6g9rthYKyQdYG6ufsKTNFZrSl5IOsKruIU0ydzTJhvvDhaQDTNPZL7WceO8SDrDefJrOfnW6NKUl2eWEmioZi0b/TN/FhfwN7Z8c2Ji5/PPz/qmHZ6f9s4Yjudddns80n/Ci2CR/dDW/zp2PZCq0G+tmaytFcBtDtKUU4OO8+7C3n9+Wcd6XVDdI64dTlWSAPQ9cKahbm2YPN4YL7VVzebVe1+NBEeadN0WYPUq9Cid3OqGqr05P8OhhHtzth6MH9y4KsILssXmt8KZahZMbxPJafR9v549H0wmvqBp/9KeiOntTVuEUJRVgzXf2eOtB4VWTedoU3mcf+gxxqveFkwqwx8UKj7aqCW9JI9iqxA1nn4xUq3AyAVbl9fYGqxKqz1vHv/vkPXMnxYUOyQTYYxPryWOrjW5PrTg7nFsX6NR2s0wmwN6q7...[3131 bytes truncated]
    phone: { type: String, default: '000000000' },
    address: { type: Object, default: { line1: '', line2: '' } },
    gender: { type: String, default: 'Not Selected' },
    dob: { type: String, default: 'Not Selected' },
    password: { type: String, required: true },
    // Rural user specific fields
    village: { type: String, default: '' },
    district: { type: String, default: '' },
    state: { type: String, default: '' },
    isRuralUser: { type: Boolean, default: false },
})

const userModel = mongoose.models.user || mongoose.model("user", userSchema);
export default userModel;

COLLECTION NAME: user
PRIMARY KEY: _id (auto-generated by MongoDB)
UNIQUE FIELDS: email, uhid (sparse)

===============================================
2. DOCTOR MODEL (doctorModel.js)
===============================================

import mongoose from "mongoose";

const doctorSchema = new mongoose.Schema({
    name: { type: String, required: true },
    email: { type: String, required: true, unique: true },
    password: { type: String, required: true },
    image: { type: String, required: true },
    speciality: { type: String, required: true },
    degree: { type: String, required: true },
    experience: { type: String, required: true },
    about: { type: String, required: true },
    available: { type: Boolean, default: true },
    fees: { type: Number, required: true },
    slots_booked: { type: Object, default: {} },
    address: { type: Object, required: true },
    date: { type: Number, required: true },
}, { minimize: false })

const doctorModel = mongoose.models.doctor || mongoose.model("doctor", doctorSchema);
export default doctorModel;

COLLECTION NAME: doctor
PRIMARY KEY: _id (auto-generated by MongoDB)
UNIQUE FIELDS: email

===============================================
3. ASHA WORKER MODEL (ashaModel.js)
===============================================

import mongoose from "mongoose";

const ashaSchema = new mongoose.Schema({
    name: { type: String, required: true },
    email: { type: String, required: true, unique: true },
    password: { type: String, required: true },
    phone: { type: String, required: true },
    village: { type: String, default: '' }, // Kept for backward compatibility
    village1: { type: String, default: '' }, // Primary village
    village2: { type: String, default: '' }, // Secondary village
    village3: { type: String, default: '' }, // Tertiary village
    subcenter: { type: String, default: '' },
    block: { type: String, default: '' },
    district: { type: String, default: '' },
    state: { type: String, default: '' },
    dateOfJoining: { type: String, default: '' },
    idNumber: { type: String, default: '' },
    image: { type: String, default: '' },
    gender: { type: String, default: 'Not Selected' },
    address: { type: Object, default: { line1: '', line2: '' } },
}, { minimize: false })

const ashaModel = mongoose.models.asha || mongoose.model("asha", ashaSchema);
export default ashaModel;

COLLECTION NAME: asha
PRIMARY KEY: _id (auto-generated by MongoDB)
UNIQUE FIELDS: email

===============================================
4. APPOINTMENT MODEL (appointmentModel.js)
===============================================

import mongoose from "mongoose"

const appointmentSchema = new mongoose.Schema({
    userId: { type: String, required: true },
    docId: { type: String, required: true },
    slotDate: { type: String, required: true },
    slotTime: { type: String, required: true },
    userData: { type: Object, required: true },
    docData: { type: Object, required: true },
    amount: { type: Number, required: true },
    date: { type: Number, required: true },
    cancelled: { type: Boolean, default: false },
    payment: { type: Boolean, default: false },
    isCompleted: { type: Boolean, default: false }
})

const appointmentModel = mongoose.models.appointment || mongoose.model("appointment", appointmentSchema)
export default appointmentModel

COLLECTION NAME: appointment
PRIMARY KEY: _id (auto-generated by MongoDB)
FOREIGN KEYS: 
  - userId (references user._id)
  - docId (references doctor._id)

===============================================
5. HEALTH RECORD MODEL (healthRecordModel.js)
===============================================

import mongoose from "mongoose";

const healthRecordSchema = new mongoose.Schema({
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'user', required: true },
    userName: { type: String, required: true },
    userEmail: { type: String, required: true },
    uhid: { type: String, default: '' }, // Unique Health ID
    village: { type: String, default: '' },
    district: { type: String, default: '' },
    state: { type: String, default: '' },
    
    // Health Information
    bloodGroup: { type: String, default: '' },
    height: { type: String, default: '' },
    weight: { type: String, default: '' },
    medicalConditions: { type: String, default: '' },
    allergies: { type: String, default: '' },
    currentMedications: { type: String, default: '' },
    vaccinationStatus: { type: String, default: '' }, // Overall vaccination status
    
    // Vaccination Records
    vaccinations: [{ 
        name: String,
        status: String, // Completed, Partially Completed, Pending, Not Taken, Overdue
        date: String, 
        nextDueDate: String 
    }],
    
    // Documents
    documents: [{
        name: String,
        url: String,
        uploadDate: { type: Date, default: Date.now }
    }],
    
    // Visit History
    visits: [{
        date: String,
        reason: String,
        diagnosis: String,
        prescription: String,
        ashaWorker: String
    }],
    
    createdAt: { type: Date, default: Date.now },
    updatedAt: { type: Date, default: Date.now }
}, { minimize: false })

const healthRecordModel = mongoose.models.healthRecord || mongoose.model("healthRecord", healthRecordSchema);
export default healthRecordModel;

COLLECTION NAME: healthRecord
PRIMARY KEY: _id (auto-generated by MongoDB)
FOREIGN KEYS:
  - userId (references user._id with mongoose.Schema.Types.ObjectId)

===============================================
RELATIONSHIPS SUMMARY
===============================================

1. USER (1) ----< (M) APPOINTMENT
   - One user can have multiple appointments
   - userId in appointment references user._id

2. DOCTOR (1) ----< (M) APPOINTMENT
   - One doctor can have multiple appointments
   - docId in appointment references doctor._id

3. USER (1) ----< (M) HEALTH_RECORD
   - One user can have multiple health records (though typically one)
   - userId in healthRecord references user._id (with ObjectId reference)

4. ASHA WORKER - Independent entity
   - No direct foreign key relationships
   - May be referenced in healthRecord.visits.ashaWorker (as string)

===============================================
ADDITIONAL NOTES
===============================================

- Database: MongoDB (NoSQL)
- ORM: Mongoose
- All models have auto-generated _id field (MongoDB ObjectId)
- Embedded documents: 
  * appointment.userData (embedded user object)
  * appointment.docData (embedded doctor object)
  * healthRecord.vaccinations (array of vaccination objects)
  * healthRecord.documents (array of document objects)
  * healthRecord.visits (array of visit objects)
- Object fields (not embedded documents):
  * user.address
  * doctor.address
  * doctor.slots_booked
  * asha.address

===============================================
END OF SCHEMA DOCUMENT
===============================================
